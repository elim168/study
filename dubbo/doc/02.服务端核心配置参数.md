# 服务端核心配置参数

服务端配置对于`<dubbo:service/>`而言最基本的参数是interface和ref，除了这两个之外还有一些重要的可配置的参数，我们一起来看看。

### executes

executes用来控制每个服务接口的每个方法的并发数的，默认是0，表示不限制。一个服务接口是可以有多个方法的，executes限制的是每个方法的并行度。下面的代码中定义了HelloService服务的每个方法的并发数是10，如果HelloService中定义了method1和method2，那么该服务能最多同时处理10个method1请求和10个method2请求。

```xml
<dubbo:service interface="com.elim.study.dubbo.service.HelloService" ref="helloService" executes="10" />
```

> 这种并发控制是通过ExecuteLimitFilter控制的。Dubbo中很多功能都是通过`org.apache.dubbo.rpc.Filter`来实现的。

### timeout

timeout用来指定远程服务调用超时时间，单位是毫秒，默认是1000毫秒。它是一个客户端参数，虽然是定义在服务端，但是它控制的是客户端远程调用的超时时间。当客户端进行远程调用超时时将抛出`org.apache.dubbo.remoting.TimeoutException`。该参数的值可以被客户端覆盖，即如果服务端指定了超时时间是2000毫秒，而客户端没有指定超时时间时客户端远程调用的超时时间将使用2000毫秒；而如果客户端指定了超时时间是500毫秒，则客户端进行远程调用的超时时间将使用500毫秒。

> 类似timeout这种可以在服务端进行定义的客户端参数通常是由于服务端更清楚它应该设置的值，
所以可以由服务端来进行定义，且在服务端只需要定义一次，客户端如果有特殊需要可以进行覆盖。
### retries

retries用来指定远程服务调用失败时的最大重试次数，不包括第一次调用，默认是2。该参数也是服务端定义给客户端使用的，可以在客户端进行覆盖。如果是服务端抛出的异常是不会进行重试的，客户端抛出的异常，比如超时异常是会进行重试的。

### version

其实每个服务都是有一个版本号的，无论是在服务端还是在客户端，服务在调用时一定是对应到一个具体的版本号的。之前我们在进行服务定义和调用时都没有指定版本号是因为Dubbo已经帮我们默认了一个版本号`0.0.0`。服务发布时可以指定一个版本号，一个服务也可以同时发布多个版本号，客户端在进行服务调用时可以选择调用服务的哪个版本。对于一个服务来说，它的最小组合粒度其实应该是服务接口、服务方法以及服务版本号。当我们的服务进行了不兼容升级时我们可能需要同时发布多个版本的服务。

```xml
<dubbo:service interface="com.elim.study.dubbo.service.HelloService" ref="helloService" version="1.0.0" />
<dubbo:service interface="com.elim.study.dubbo.service.HelloService" ref="helloService2" version="1.0.1" />
<dubbo:reference id="helloService" interface="com.elim.study.dubbo.service.HelloService" version="1.0.1" />
```

> 官方建议版本号一般使用3位数。

### group

与version类似，当一个接口有多个实现时还可以通过group来区分不同的实现。

```xml
<dubbo:service interface="com.elim.study.dubbo.service.HelloService" ref="helloService" group="A" />
<dubbo:service interface="com.elim.study.dubbo.service.HelloService" ref="helloService2" group="B" />
<dubbo:reference id="helloService" interface="com.elim.study.dubbo.service.HelloService" group="A"/>
```

### delay

延迟注册服务时间，单位是毫秒，默认是0。当指定为-1时表示延迟到Spring容器初始化以后再注册服务。

### 

### 参考文档

[http://dubbo.apache.org/zh-cn/docs/user/references/xml/dubbo-service.html](http://dubbo.apache.org/zh-cn/docs/user/references/xml/dubbo-service.html)

（注：本文是基于Dubbo2.7.2所写）