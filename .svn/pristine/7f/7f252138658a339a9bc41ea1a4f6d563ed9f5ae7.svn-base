/**
 * 
 */
package com.yeelim.learn.spring.security.service.impl;

import java.util.ArrayList;
import java.util.List;

import org.springframework.security.access.prepost.PostAuthorize;
import org.springframework.security.access.prepost.PostFilter;
import org.springframework.security.access.prepost.PreAuthorize;
import org.springframework.security.access.prepost.PreFilter;
import org.springframework.stereotype.Service;

import com.yeelim.learn.spring.security.entity.User;
import com.yeelim.learn.spring.security.service.UserService;

/**
 * @author Yeelim
 * @date 2014-6-15
 * @time 下午4:45:48 
 *
 */
@Service
public class UserServiceImpl implements UserService {

	public void addUser(User user) {
		System.out.println("addUser................" + user);
	}

	@PreAuthorize("hasRole('ROLE_ADMIN')")
	public void updateUser(User user) {
		System.out.println("updateUser.............." + user);
	}

	@PostAuthorize("returnObject.id%2==0")
	public User find(int id) {
		User user = new User();
		user.setId(id);
		return user;
	}

	public void delete(int id) {
		System.out.println("delete user by id................");
	}
	
	@PreFilter(filterTarget="ids", value="filterObject%2==0")
	public void delete(List<Integer> ids, List<String> usernames) {
		for (Integer i : ids) {
			System.out.println(i);
		}
	}

	@PostFilter("filterObject.id%2==0")
	public List<User> findAll() {
		List<User> userList = new ArrayList<User>();
		User user;
		for (int i=0; i<10; i++) {
			user = new User();
			user.setId(i);
			userList.add(user);
		}
		return userList;
	}

}
